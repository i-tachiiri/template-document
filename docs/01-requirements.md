## プロジェクト名

## 利用者

## 利用者の課題

## 用語

**商品一覧** : 共有ドライブ配下の各フォルダで定義される
**顧客情報** : 生まれた年・月・日・時・分、生まれた場所の国・都道府県・市町村・緯度・経度、タイムゾーン
**顧客リストマスタ** : スプレッドシートで作成された、顧客リストの名前とIDの一覧
**顧客リスト++ : スプレッドシート
**共通ページ** : 表紙・ヘッダー・はじめに・おわりに・フッター・その他全レポートに共通のページを指す
**アスペクトマスタ** : 天体星座の並び順・章の見出し
**チャプター** : 天体星座単位で表されるレポートの章。チャプターの順番はアスペクトマスタで定義される
**セクション** : 「天体A」と「天体B」の「アスペクト」で表される値。天体Aはチャプターから取得されるので、天体Bとアスペクトをユーザーが選択する

## 業務手順

- ログインページへアクセスする
- Googleアカウントでログインする
  - OAuth2.0トークン認証
  - スプレッドシート・Googleドライブの読み取り・書き込み権限をスコープに加える
  - **商品一覧**のフォルダのうち、アクセス権限のあるものについて、フォルダ名・レポート選択画面へのリンクが表示される
  - 顧客選択画面を開く
- 顧客選択画面にアクセスする
  - ログインしたアクセストークンを利用し、顧客リストから顧客一覧を取得・表示する
  - 顧客を選択して顧客一覧ページへ進む
  - **顧客情報**のフォームを入力する
    - 生まれた年・月・日・時・分、生まれた場所の国・都道府県・市町村はスプレッドシートから取得して入力する
    - 緯度・経度はユーザーが入力する。数値である事をバリデーションする
    - タイムゾーンは初期値を東京にして、プルダウンで選択可能にする
    - レポート選択画面へ進む
- レポート選択画面にアクセスする
  - レポートマスタから、レポートの一覧を取得する
  - アスペクト選択画面を開く
- アスペクト選択画面にアクセスする
  - アスペクトマスタを参照し**チャプター**を表示する
  - チャプターごとに**セクション**を追加できるようにする
    - デフォルトでは天体Aの固定値と、天体B・アスペクトのプルダウンがある
    - プルダウンを選択して「追加」を押すと次のプルダウンが出てくる
    - 未追加のプルダウンは、未入力として扱う
      - 将来的にSwissEphNetからの自動計算による拡張を想定
- プレビュー画面を開く
  - 
